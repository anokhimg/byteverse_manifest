version: 0.0.15
jobId: "170"
jobName: Customer
jobType: Source Aligned Data Product
developerId: 5fd4295c-4450-4bd6-af56-3570e9c19332
domain: supply_chain
alias: SADP_Creation
discoveryPort:
  name: Customer
inputPorts:
  - alias: customer
    isDynamic: true
    path: s3://dataverse-supplychain/datasets/customer/
    optional:
      persistDataFrame: false
      advanceOptions:
        mergeSchema: true
      enableDataReconciliation: false
      enforceSchema: false
      connection: Supply Chain Datasets
      dataSetUrn: urn:dv:dataset:bfb29cc6-64e4-418e-8bf2-87282dcbdf65
    type: inputParquet
productState:
  isDynamic: true
  alias: SADP_Creation
  retentionVersions: ""
  logicalSchema:
    properties:
      customer_key:
        type: STRING
        description: Customer Key
        sourceColumn: C_CUSTKEY_src
        sourceTable: customer
      customer_name:
        type: STRING
        description: Customer Full Name
        sourceColumn: C_NAME_src
        sourceTable: customer
      customer_address:
        type: STRING
        description: Customer Address
        sourceColumn: C_ADDRESS_SRC
        sourceTable: customer
      customer_nation:
        type: STRING
        description: ""
        sourceColumn: C_NATIONKEY_SRC
        sourceTable: customer
      customer_phone_no:
        type: STRING
        description: ""
        sourceColumn: C_PHONE_SRC
        sourceTable: customer
      customer_balance:
        type: STRING
        description: ""
        sourceColumn: C_ACCTBAL_SRC
        sourceTable: customer
      customer_marketsegment:
        type: STRING
        description: ""
        sourceColumn: C_MKTSEGMENT_SRC
        sourceTable: customer
      customer_comment:
        type: STRING
        description: ""
        sourceColumn: C_COMMENT_SRC
        sourceTable: customer
  stateStoreType: loadDataIceberg
  isProfilingEnabled: true
  updateStrategy: Overwrite
  tableName: s3source.customer
  warehousePath: s3://dataverse-supplychain/SADP/
  catalogName: iceberg
  optional:
    persistDataFrame: false
    enableDataReconciliation: false
    enforceSchema: true
    enforceSchemaMethod: Warning
    catalogType: glue
    loggingOptions:
      printSchema: true
  refreshInterval: None
transformation:
  - isDynamic: true
    alias: Spark_SQL_1
    description: Data Fetch
    sequence: 2
    inputDataFrameList:
      - inputDataFrame: customer
        tempViewName: df_customer
    query: SELECT C_CUSTKEY AS customer_key, C_NAME AS customer_name, C_ADDRESS AS
      customer_address, C_NATIONKEY AS customer_nation, C_PHONE AS
      customer_phone_no, C_ACCTBAL AS customer_balance, C_MKTSEGMENT AS
      customer_marketsegment, C_COMMENT AS customer_comment FROM df_customer;
    optional:
      persistDataFrame: false
    type: operationThroughSqlQuery
controlPort:
  dataQualityRules:
    UniquenessCheck:
      productState:
        checks:
          - column: customer_key
        referenceAlias: SADP_Creation
