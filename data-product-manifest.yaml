version: 0.1.0
jobId: "12"
jobName: Incidents Ageing
jobType: Aggregated Data Product
alias: Load_data_in_incidents_ageing_table
discoveryPort:
  name: Incidents Ageing
inputPorts:
  - alias: Incidents_1
    description: ""
    tags: []
    extra: {}
    syncType: pull
    type: dataproduct
    filter: ""
    projection: []
    dataProductUrn: urn:dv:dataproduct:00a672c8-a075-468c-b21d-55b532b63688
    inputType: azureSQL
    tableName: fnd_datahub_incidents
    persistDataFrame: false
    entity:
      advanceOptions:
        mergeSchema: false
productState:
  alias: Load_data_in_incidents_ageing_table
  stateStoreType: azureSQL
  updateStrategy: Overwrite
  refreshInterval: None
  retentionVersions: ""
  logicalSchema:
    properties:
      IncidentNumber:
        type: STRING
        description: Incident number
      Priority:
        type: STRING
        description: Priority of incident
      Shortdescription:
        type: STRING
        description: Short description of incident
      Description:
        type: STRING
        description: Detailed description of incident
      Created:
        type: STRING
        description: Time when incident was created
      Resolved:
        type: STRING
        description: Time when incident was resolved
      ResolutionNotes:
        type: STRING
        description: Notes/comments on resolution
      Category:
        type: STRING
        description: ""
      SubCategory:
        type: STRING
        description: ""
  enforceSchemaMethod: ""
  enforceSchema: false
  addRunIdColumn: false
  enableDataReconciliation: false
  isProfilingEnabled: true
  tableName: int_datahub_incidents_ageing
transformation:
  - alias: Spark_SQL_1
    type: SQL
    description: Calculate ageing
    query: select *,cast(DATEDIFF (resolved_date, created_date ) as float) as resolution_days from incidents
    sequenceNo: 2
    references:
      - alias: Incidents_1
        sqlReference: incidents
controlPort:
  dataQualityRules: {}
outputPort:
  subscriptionChannels:
    - channelType: Postgres
      queryType: SQL
