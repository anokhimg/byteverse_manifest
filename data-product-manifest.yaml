version: 0.0.9
jobId: "170"
jobName: Customer
jobType: Source Aligned Data Product
developerId: 5fd4295c-4450-4bd6-af56-3570e9c19332
domain: supply_chain
alias: SADP_Creation
discoveryPort:
  name: Customer
inputPorts:
  - alias: customer
    isDynamic: true
    path: s3://dataverse-supplychain/datasets/customer/
    optional:
      persistDataFrame: false
      advanceOptions:
        mergeSchema: true
      enableDataReconciliation: false
      enforceSchema: false
      connection: Supply Chain Datasets
      dataSetUrn: urn:dv:dataset:bfb29cc6-64e4-418e-8bf2-87282dcbdf65
    type: inputParquet
productState:
  isDynamic: true
  alias: SADP_Creation
  retentionVersions: ""
  logicalSchema:
    properties:
      C_CUSTKEY:
        type: STRING
        description: Customer Key
        sourceColumn: C_CUSTKEY_src
        sourceTable: customer
      C_NAME:
        type: STRING
        description: Customer Full Name
        sourceColumn: C_NAME_src
        sourceTable: customer
      C_ADDRESS:
        type: STRING
        description: Customer Address
        sourceColumn: C_ADDRESS_src
        sourceTable: customer
      C_NATIONKEY:
        type: STRING
        description: ""
        sourceColumn: C_NATIONKEY_src
        sourceTable: customer
      C_PHONE:
        type: STRING
        description: ""
        sourceColumn: C_PHONE_src
        sourceTable: customer
      C_ACCTBAL:
        type: STRING
        description: ""
        sourceColumn: C_ACCTBAL_src
        sourceTable: customer
      C_MKTSEGMENT:
        type: STRING
        description: ""
        sourceColumn: C_MKTSEGMENT_src
        sourceTable: customer
      C_COMMENT:
        type: STRING
        description: ""
        sourceColumn: C_COMMENT_src
        sourceTable: customer
  stateStoreType: loadDataIceberg
  isProfilingEnabled: true
  updateStrategy: Overwrite
  tableName: s3source.customer
  warehousePath: s3://dataverse-supplychain/SADP/
  catalogName: iceberg
  optional:
    persistDataFrame: false
    enableDataReconciliation: false
    enforceSchema: true
    enforceSchemaMethod: Warning
    catalogType: glue
    loggingOptions:
      printSchema: true
  refreshInterval: 00 08 * * *
transformation:
  - isDynamic: true
    alias: Spark_SQL_1
    description: Data Fetch
    sequence: 2
    inputDataFrameList:
      - inputDataFrame: customer
        tempViewName: df_customer
    query: select * from df_customer;
    optional:
      persistDataFrame: false
    type: operationThroughSqlQuery
controlPort:
  dataQualityRules:
    NullValueCheck:
      productState:
        checks:
          - column: C_ACCTBAL
            expression: ">="
            number: 0
        referenceAlias: SADP_Creation
    UniquenessCheck:
      productState:
        checks:
          - column: C_CUSTKEY
        referenceAlias: SADP_Creation
